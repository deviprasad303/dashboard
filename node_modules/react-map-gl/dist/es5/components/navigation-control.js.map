{"version":3,"sources":["../../../src/components/navigation-control.js"],"names":["LINEAR_TRANSITION_PROPS","Object","assign","TransitionManager","defaultProps","transitionDuration","propTypes","BaseControl","className","PropTypes","string","onViewStateChange","func","onViewportChange","showCompass","bool","showZoom","NavigationControl","props","_updateViewport","bind","_onZoomIn","_onZoomOut","_onResetNorth","_renderCompass","_renderButton","nextProps","nextState","nextContext","context","viewport","bearing","opts","mapState","MapState","viewState","getViewportProps","onChangeViewport","zoom","pitch","style","transform","type","label","callback","children","key","title","onClick","ref","_onContainerLoad","displayName"],"mappings":"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","sourcesContent":["import {createElement} from 'react';\nimport PropTypes from 'prop-types';\nimport BaseControl from './base-control';\n\nimport MapState from '../utils/map-state';\nimport TransitionManager from '../utils/transition-manager';\n\nimport deprecateWarn from '../utils/deprecate-warn';\n\nconst LINEAR_TRANSITION_PROPS = Object.assign({}, TransitionManager.defaultProps, {\n  transitionDuration: 300\n});\n\nconst propTypes = Object.assign({}, BaseControl.propTypes, {\n  // Custom className\n  className: PropTypes.string,\n  // Callbacks fired when the user interacted with the map. The object passed to the callbacks\n  // contains viewport properties such as `longitude`, `latitude`, `zoom` etc.\n  onViewStateChange: PropTypes.func,\n  onViewportChange: PropTypes.func,\n  // Show/hide compass button\n  showCompass: PropTypes.bool,\n  // Show/hide zoom buttons\n  showZoom: PropTypes.bool\n});\n\nconst defaultProps = Object.assign({}, BaseControl.defaultProps, {\n  className: '',\n  onViewStateChange: () => {},\n  onViewportChange: () => {},\n  showCompass: true,\n  showZoom: true\n});\n\n/*\n * PureComponent doesn't update when context changes, so\n * implementing our own shouldComponentUpdate here.\n */\nexport default class NavigationControl extends BaseControl {\n\n  constructor(props) {\n    super(props);\n    // Check for deprecated props\n    deprecateWarn(props);\n\n    this._updateViewport = this._updateViewport.bind(this);\n    this._onZoomIn = this._onZoomIn.bind(this);\n    this._onZoomOut = this._onZoomOut.bind(this);\n    this._onResetNorth = this._onResetNorth.bind(this);\n    this._renderCompass = this._renderCompass.bind(this);\n    this._renderButton = this._renderButton.bind(this);\n  }\n\n  shouldComponentUpdate(nextProps, nextState, nextContext) {\n    return this.context.viewport.bearing !== nextContext.viewport.bearing;\n  }\n\n  _updateViewport(opts) {\n    const {viewport} = this.context;\n    const mapState = new MapState(Object.assign({}, viewport, opts));\n    const viewState = Object.assign({}, mapState.getViewportProps(), LINEAR_TRANSITION_PROPS);\n\n    // Call new style callback\n    this.props.onViewStateChange({viewState});\n\n    // Call old style callback\n    // TODO(deprecate): remove this check when `onChangeViewport` gets deprecated\n    const onViewportChange = this.props.onChangeViewport || this.props.onViewportChange;\n    onViewportChange(viewState);\n  }\n\n  _onZoomIn() {\n    this._updateViewport({zoom: this.context.viewport.zoom + 1});\n  }\n\n  _onZoomOut() {\n    this._updateViewport({zoom: this.context.viewport.zoom - 1});\n  }\n\n  _onResetNorth() {\n    this._updateViewport({bearing: 0, pitch: 0});\n  }\n\n  _renderCompass() {\n    const {bearing} = this.context.viewport;\n    return createElement('span', {\n      className: 'mapboxgl-ctrl-compass-arrow',\n      style: {transform: `rotate(${bearing}deg)`}\n    });\n  }\n\n  _renderButton(type, label, callback, children) {\n    return createElement('button', {\n      key: type,\n      className: `mapboxgl-ctrl-icon mapboxgl-ctrl-${type}`,\n      type: 'button',\n      title: label,\n      onClick: callback,\n      children\n    });\n  }\n\n  render() {\n\n    const {className, showCompass, showZoom} = this.props;\n\n    return createElement('div', {\n      className: `mapboxgl-ctrl mapboxgl-ctrl-group ${className}`,\n      ref: this._onContainerLoad\n    }, [\n      showZoom && this._renderButton('zoom-in', 'Zoom In', this._onZoomIn),\n      showZoom && this._renderButton('zoom-out', 'Zoom Out', this._onZoomOut),\n      showCompass &&\n        this._renderButton('compass', 'Reset North', this._onResetNorth, this._renderCompass())\n    ]);\n  }\n}\n\nNavigationControl.displayName = 'NavigationControl';\nNavigationControl.propTypes = propTypes;\nNavigationControl.defaultProps = defaultProps;\n"],"file":"navigation-control.js"}